<!-- Composant d'affichage des références et sources -->
<section class="module-references">
    <h2 class="references-title">
        <span class="references-icon">📚</span>
        Sources et Références
    </h2>
    
    {% if include.module_id %}
    <!-- Références spécifiques au module -->
    {% assign module_refs = site.data.references.module_references[include.module_id] %}
    {% if module_refs %}
    <div class="references-grid">
        {% for ref_id in module_refs %}
        {% assign reference = site.data.references.references[ref_id] %}
        {% if reference %}
        <div class="reference-card" data-type="{{ reference.type }}">
            <div class="reference-header">
                <h3 class="reference-title">
                    <a href="{{ reference.url }}" target="_blank" rel="noopener noreferrer">
                        {{ reference.title }}
                        <span class="external-link-icon">🔗</span>
                    </a>
                </h3>
                <div class="reference-meta">
                    <span class="reference-type type-{{ reference.type }}">
                        {% case reference.type %}
                        {% when 'book' %}📖 Livre
                        {% when 'documentation' %}📋 Documentation
                        {% when 'guide' %}📝 Guide
                        {% when 'platform' %}🌐 Plateforme
                        {% when 'examples' %}💡 Exemples
                        {% else %}📄 Ressource
                        {% endcase %}
                    </span>
                    {% if reference.authors %}
                    <span class="reference-authors">
                        par {{ reference.authors | join: ", " }}
                    </span>
                    {% endif %}
                </div>
            </div>
            
            <div class="reference-content">
                <p class="reference-description">{{ reference.description }}</p>
                
                {% if reference.tags %}
                <div class="reference-tags">
                    {% for tag in reference.tags %}
                    <span class="reference-tag">{{ tag }}</span>
                    {% endfor %}
                </div>
                {% endif %}
            </div>
            
            <div class="reference-actions">
                <a href="{{ reference.url }}" 
                   target="_blank" 
                   rel="noopener noreferrer"
                   class="btn btn-outline btn-sm">
                    Consulter
                </a>
            </div>
        </div>
        {% endif %}
        {% endfor %}
    </div>
    {% else %}
    <p class="no-references">Aucune référence spécifique pour ce module.</p>
    {% endif %}
    
    {% else %}
    <!-- Affichage de toutes les références (pour une page générale) -->
    {% if include.tags %}
    <!-- Filtrage par tags -->
    {% assign filtered_refs = site.data.references.references | where_exp: "ref", "ref[1].tags contains include.tags" %}
    {% else %}
    {% assign filtered_refs = site.data.references.references %}
    {% endif %}
    
    <div class="references-grid">
        {% for ref_pair in filtered_refs %}
        {% assign ref_id = ref_pair[0] %}
        {% assign reference = ref_pair[1] %}
        <div class="reference-card" data-type="{{ reference.type }}">
            <div class="reference-header">
                <h3 class="reference-title">
                    <a href="{{ reference.url }}" target="_blank" rel="noopener noreferrer">
                        {{ reference.title }}
                        <span class="external-link-icon">🔗</span>
                    </a>
                </h3>
                <div class="reference-meta">
                    <span class="reference-type type-{{ reference.type }}">
                        {% case reference.type %}
                        {% when 'book' %}📖 Livre
                        {% when 'documentation' %}📋 Documentation
                        {% when 'guide' %}📝 Guide
                        {% when 'platform' %}🌐 Plateforme
                        {% when 'examples' %}💡 Exemples
                        {% else %}📄 Ressource
                        {% endcase %}
                    </span>
                    {% if reference.authors %}
                    <span class="reference-authors">
                        par {{ reference.authors | join: ", " }}
                    </span>
                    {% endif %}
                </div>
            </div>
            
            <div class="reference-content">
                <p class="reference-description">{{ reference.description }}</p>
                
                {% if reference.tags %}
                <div class="reference-tags">
                    {% for tag in reference.tags %}
                    <span class="reference-tag">{{ tag }}</span>
                    {% endfor %}
                </div>
                {% endif %}
            </div>
            
            <div class="reference-actions">
                <a href="{{ reference.url }}" 
                   target="_blank" 
                   rel="noopener noreferrer"
                   class="btn btn-outline btn-sm">
                    Consulter
                </a>
            </div>
        </div>
        {% endfor %}
    </div>
    {% endif %}
    
    <!-- Section ressources complémentaires -->
    <div class="additional-resources">
        <h3 class="additional-title">
            <span class="additional-icon">🔍</span>
            Ressources Complémentaires
        </h3>
        
        <div class="resources-categories">
            <div class="resource-category">
                <h4>🎓 Formation Continue</h4>
                <ul>
                    <li><a href="https://www.edx.org/learn/devops" target="_blank">Cours DevOps sur edX</a></li>
                    <li><a href="https://www.coursera.org/specializations/devops" target="_blank">Spécialisation DevOps Coursera</a></li>
                    <li><a href="https://acloudguru.com/browse/devops" target="_blank">A Cloud Guru - DevOps</a></li>
                </ul>
            </div>
            
            <div class="resource-category">
                <h4>🏆 Certifications</h4>
                <ul>
                    <li><a href="https://aws.amazon.com/certification/certified-devops-engineer-professional/" target="_blank">AWS DevOps Engineer</a></li>
                    <li><a href="https://cloud.google.com/certification/cloud-devops-engineer" target="_blank">Google Cloud DevOps Engineer</a></li>
                    <li><a href="https://docs.microsoft.com/en-us/learn/certifications/devops-engineer/" target="_blank">Azure DevOps Engineer</a></li>
                </ul>
            </div>
            
            <div class="resource-category">
                <h4>🌐 Communautés</h4>
                <ul>
                    <li><a href="https://www.reddit.com/r/devops/" target="_blank">Reddit r/devops</a></li>
                    <li><a href="https://devops.stackexchange.com/" target="_blank">DevOps Stack Exchange</a></li>
                    <li><a href="https://www.meetup.com/topics/devops/" target="_blank">Meetups DevOps locaux</a></li>
                </ul>
            </div>
            
            <div class="resource-category">
                <h4>📰 Veille Technologique</h4>
                <ul>
                    <li><a href="https://devops.com/" target="_blank">DevOps.com</a></li>
                    <li><a href="https://www.infoq.com/devops/" target="_blank">InfoQ DevOps</a></li>
                    <li><a href="https://thenewstack.io/" target="_blank">The New Stack</a></li>
                </ul>
            </div>
        </div>
    </div>
    
    <!-- Note sur l'utilisation des références -->
    <div class="references-note">
        <p><strong>Note :</strong> Ces références sont fournies à des fins éducatives. 
        Nous encourageons la consultation des sources officielles pour obtenir les informations 
        les plus récentes et détaillées.</p>
    </div>
</section>

<!-- Styles CSS pour les références -->
<style>
.module-references {
    margin: 2rem 0;
    padding: 1.5rem;
    background: var(--bg-secondary, #f8f9fa);
    border-radius: 8px;
    border-left: 4px solid var(--primary-color, #007bff);
}

.references-title {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-bottom: 1.5rem;
    color: var(--text-primary, #333);
    font-size: 1.5rem;
}

.references-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 1rem;
    margin-bottom: 2rem;
}

.reference-card {
    background: white;
    border-radius: 6px;
    padding: 1rem;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.reference-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0,0,0,0.15);
}

.reference-title a {
    color: var(--primary-color, #007bff);
    text-decoration: none;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.reference-title a:hover {
    text-decoration: underline;
}

.external-link-icon {
    font-size: 0.8em;
    opacity: 0.7;
}

.reference-meta {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    margin: 0.5rem 0;
    font-size: 0.9rem;
}

.reference-type {
    padding: 0.2rem 0.5rem;
    border-radius: 4px;
    font-size: 0.8rem;
    font-weight: 500;
}

.type-book { background: #e3f2fd; color: #1976d2; }
.type-documentation { background: #f3e5f5; color: #7b1fa2; }
.type-guide { background: #e8f5e8; color: #388e3c; }
.type-platform { background: #fff3e0; color: #f57c00; }
.type-examples { background: #fce4ec; color: #c2185b; }

.reference-authors {
    color: var(--text-secondary, #666);
    font-style: italic;
}

.reference-description {
    margin: 0.5rem 0;
    color: var(--text-primary, #333);
    line-height: 1.5;
}

.reference-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 0.25rem;
    margin: 0.5rem 0;
}

.reference-tag {
    background: var(--bg-tertiary, #e9ecef);
    color: var(--text-secondary, #666);
    padding: 0.2rem 0.4rem;
    border-radius: 3px;
    font-size: 0.75rem;
}

.reference-actions {
    margin-top: 1rem;
    padding-top: 1rem;
    border-top: 1px solid var(--border-color, #dee2e6);
}

.additional-resources {
    margin-top: 2rem;
    padding-top: 1.5rem;
    border-top: 2px solid var(--border-color, #dee2e6);
}

.additional-title {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-bottom: 1rem;
    color: var(--text-primary, #333);
}

.resources-categories {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1rem;
}

.resource-category h4 {
    margin-bottom: 0.5rem;
    color: var(--primary-color, #007bff);
}

.resource-category ul {
    list-style: none;
    padding: 0;
}

.resource-category li {
    margin-bottom: 0.25rem;
}

.resource-category a {
    color: var(--text-primary, #333);
    text-decoration: none;
}

.resource-category a:hover {
    color: var(--primary-color, #007bff);
    text-decoration: underline;
}

.references-note {
    margin-top: 1.5rem;
    padding: 1rem;
    background: var(--bg-warning, #fff3cd);
    border-radius: 4px;
    border-left: 4px solid var(--warning-color, #ffc107);
}

.references-note p {
    margin: 0;
    color: var(--text-warning, #856404);
    font-size: 0.9rem;
}

.no-references {
    text-align: center;
    color: var(--text-secondary, #666);
    font-style: italic;
    padding: 2rem;
}

@media (max-width: 768px) {
    .references-grid {
        grid-template-columns: 1fr;
    }
    
    .resources-categories {
        grid-template-columns: 1fr;
    }
    
    .reference-meta {
        flex-direction: column;
        gap: 0.25rem;
    }
}
</style>